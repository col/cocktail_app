"use strict";angular.module("cocktailNinjaApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angular-hal"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/bottles",{templateUrl:"views/bottles.html",controller:"BottlesCtrl"}).when("/home_screen",{templateUrl:"views/home_screen.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("cocktailNinjaApp").controller("MainCtrl",["$scope","DrinksService","DrunkamatronService",function(a,b,c){function d(){return{name:"",ingredients:[{type:"",amount:null}]}}a.drinks=void 0,a.bottles=void 0,a.selectedDrink=null,a.newDrink=null,a.init=function(){b.load().then(function(a){return a.$get("drinks")}).then(function(a){return a.$get("drinks")}).then(function(b){a.drinks=b}),b.load().then(function(a){return a.$get("bottles")}).then(function(a){return a.$get("bottles")}).then(function(b){a.bottles=b})},a.selectDrink=function(b){a.selectedDrink=b},a.unselectDrink=function(){a.selectedDrink=null},a.deleteDrink=function(b){b.$del("self").then(function(){a.drinks=a.drinks.filter(function(a){return a!==b}),a.selectedDrink=null})},a.saveDrink=function(){a.selectedDrink?a.selectedDrink.$patch("self",{},a.newDrink).then(function(){console.log("success!"),a.backToList()}):a.createDrink()},a.createDrink=function(){b.load().then(function(b){return b.$post("drinks",{},a.newDrink)}).then(function(b){a.drinks.push(b),a.newDrink=null})},a.addIngredient=function(){a.newDrink.ingredients.push({})},a.addDrink=function(){a.selectedDrink=null,a.newDrink=d()},a.backToList=function(){a.selectedDrink=null,a.newDrink=null},a.editDrink=function(b){a.newDrink=angular.copy(b)},a.makeDrink=function(b){c.makeAwesomeDrink(b,a.bottles)},a.isAvailable=function(){},a.updateBottleAmount=function(){}}]),angular.module("cocktailNinjaApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("cocktailNinjaApp").controller("BottlesCtrl",["$scope","DrinksService",function(a,b){function c(){return{type:"",amount:"",pin:""}}a.bottles=void 0,a.selectedBottle=null,a.newBottle=null,a.init=function(){b.load().then(function(a){return a.$get("bottles")}).then(function(a){return a.$get("bottles")}).then(function(b){a.bottles=b})},a.selectBottle=function(b){a.selectedBottle=b},a.unselectBottle=function(){a.selectedBottle=null},a.deleteBottle=function(b){b.$del("self").then(function(){a.bottles=a.bottles.filter(function(a){return a!==b})})},a.saveBottle=function(){a.selectedBottle?a.selectedBottle.$patch("self",{},a.newBottle).then(function(){console.log("success!"),a.backToList()}):a.createBottle()},a.createBottle=function(){b.load().then(function(b){return b.$post("bottles",{},a.newBottle)}).then(function(b){a.bottles.push(b),a.newBottle=null})},a.editBottle=function(b){a.newBottle=angular.copy(b)},a.addBottle=function(){a.selectedBottle=null,a.newBottle=c()},a.backToList=function(){a.selectedBottle=null,a.newBottle=null}}]),angular.module("cocktailNinjaApp").factory("DrinksService",["$http","halClient",function(a,b){return{load:function(){return b.$get("http://localhost:9292")}}}]),angular.module("cocktailNinjaApp").factory("DrunkamatronService",["$http",function(a){return{makeAwesomeDrink:function(b,c){var d=_.map(b.ingredients,function(a){var b=_.find(c,function(b){return b.type==a.type});return b.pin+"-"+a.amount}).join("/");a.get("http://10.171.124.73/arduino/make_drink/"+d).success(function(){console.log("your drink is served")}).error(function(){console.log("call col, he'll sort your shit out")})}}}]);